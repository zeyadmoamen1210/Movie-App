var z=Object.defineProperty;var D=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var k=(t,s,o)=>s in t?z(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,A=(t,s)=>{for(var o in s||(s={}))E.call(s,o)&&k(t,o,s[o]);if(D)for(var o of D(s))R.call(s,o)&&k(t,o,s[o]);return t};import{d as x,o as c,c as r,a as e,t as F,u as V,b as S,r as C,e as j,w as T,f as q,g as v,h as w,_ as U,i as W,E as L,j as B,k as p,l as Y,F as M,m as N,n as I,p as O,q as P,s as X,v as G}from"./index.5c053432.js";var H="/assets/no-data.01a6879c.svg";const J={class:"no-data"},K=e("img",{class:"no-data__img",src:H},null,-1),Q={class:"no-data__title"},Z=x({__name:"NoData",props:{text:{type:String,required:!0}},setup(t){return(s,o)=>(c(),r("section",J,[K,e("h5",Q,F(t.text),1)]))}}),ee={class:"movie-card"},te=e("div",{class:"movie-card__actions"},null,-1),se={class:"movie-card__img",alt:""},oe={class:"movie-card__body"},ae={class:"movie-card__name"},ie={class:"movie-action"},ne={class:"movie-action__wrapper"},ce={class:"movie-action__delete"},le=e("button",{class:"button button--icon"},[e("img",{class:"movie-action__icon",src:U,alt:""})],-1),re={class:"movie-action__edit"},_e=e("button",{class:"button button--icon"},[e("img",{class:"movie-action__icon",src:W,alt:""})],-1),ue=x({__name:"Movie",props:{movie:{type:Object,required:!0}},emits:["movieDeleted"],setup(t,{emit:s}){const{axios:o}=B(),f=V(),{t:i}=S(),d=async m=>{try{(await o.delete(`/movies/${m.id}`)).data.status==="success"&&(s("movieDeleted",m),L({title:i("messages.DeletedSuccessfully"),type:"success",showClose:!1}))}catch{L({title:i("messages.ThereAreSomethingWrong"),message:i("messages.CheckYourConnection"),type:"error",showClose:!1})}};return(m,n)=>{const h=C("el-popconfirm"),y=C("RouterLink"),b=j("lazy");return c(),r("section",ee,[te,T(e("img",se,null,512),[[b,{src:q(f).baseUrl+t.movie.image,loading:"https://i.ibb.co/2Wq8X3z/loading.webp",error:"your error image url"}]]),e("div",oe,[e("h6",ae,F(t.movie.name),1),e("div",ie,[e("div",ne,[e("div",ce,[v(h,{onConfirm:n[0]||(n[0]=a=>d(t.movie)),"confirm-button-text":"Yes","cancel-button-text":"No","icon-color":"#626AEF",title:"Are you sure to delete this?"},{reference:w(()=>[le]),_:1})]),e("div",re,[v(y,{to:`/movies/${t.movie.id}/update`},{default:w(()=>[_e]),_:1},8,["to"])])])])])])}}}),de={class:"movies"},me={class:"movies__header"},ve=e("h4",{class:"font font--title"}," \u062C\u0645\u064A\u0639 \u0627\u0644\u0623\u0641\u0644\u0627\u0645 ",-1),he=G("\u0625\u0636\u0627\u0641\u0629 \u0641\u064A\u0644\u0645"),ge={class:"movies__categories"},pe={key:0,class:"movies__grid"},be=x({__name:"index",setup(t){const{t:s}=S(),{getAll:o}=O(),{axios:f}=B(),i=p([]),d=p(),m=p({created_at:new Date,id:0,name:"All",updated_at:new Date}),n=p(),h=async()=>{var _,u;let a="/movies";return((_=n.value)==null?void 0:_.name)!=="All"&&(a=`/moviesByCategory/${(u=n.value)==null?void 0:u.id}`),(await f.get(a)).data};Y(async()=>{var _;n.value=m.value;let[a,l]=await Promise.all([o(),h()]);d.value=a.message,(_=d.value)==null||_.unshift({id:0,name:"All",created_at:new Date,updated_at:new Date}),i.value=l.message});const y=async a=>{n.value=A({},a);const l=await h();i.value=l.message},b=a=>{var l;(l=i.value)==null||l.splice(a,1)};return(a,l)=>{const _=C("RouterLink");return c(),r("div",de,[e("div",me,[ve,v(_,{class:"movies__add button button--secondary",to:"/movies/add"},{default:w(()=>[he]),_:1})]),e("section",ge,[(c(!0),r(M,null,N(d.value,(u,g)=>{var $;return c(),r("article",{key:g},[v(X,{category:u,class:P({"selected-category":(($=n.value)==null?void 0:$.id)===u.id}),editable:!1,onSelect:y},null,8,["category","class"])])}),128))]),i.value.length>0?(c(),r("section",pe,[(c(!0),r(M,null,N(i.value,(u,g)=>(c(),r("article",{key:g},[v(ue,{onMovieDeleted:$=>b(g),movie:u},null,8,["onMovieDeleted","movie"])]))),128))])):(c(),I(Z,{key:1,text:q(s)("NoData.NoMoviesFound")},null,8,["text"]))])}}});export{be as default};
